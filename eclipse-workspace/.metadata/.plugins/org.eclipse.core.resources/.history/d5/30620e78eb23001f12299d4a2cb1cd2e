package RestAssuredExample;

import org.junit.Test;
import org.testng.Assert;

import io.restassured.RestAssured;
import io.restassured.path.json.JsonPath;
import io.restassured.response.Response;
import io.restassured.response.ResponseBody;
import io.restassured.specification.RequestSpecification;
 
public class QueryParameter {
	
	private RestAssured request;
	@Test
	public void queryParam() 
	{
		RestAssured.baseURI = "https://bookstore.toolsqa.com/BookStore/v1";
		RequestSpecification httpRequest = RestAssured.given();
		Response res = httpRequest.queryParam("ISBN", "9781449331818").get("/Book");
		ResponseBody body = res.body();//res.getBody();
		String rbdy=body.asString();
		JsonPath jpath = new JsonPath(rbdy);
		String title = jpath.getString("title");
		System.out.println("The book title is- "+title);
		Assert.assertEquals(title,"Learning JavaScript Design Patterns");
		String author = jpath.getString("author");
		System.out.println("The book author is- "+author);
	}
	@Test
	public void UserRegistrationSuccessful()
	{
		RestAssured.baseURI = "https://bookstore.toolsqa.com/BookStore/v1";
		RequestSpecification httpRequest = RestAssured.given();
		JSONObject requestParams = new JSONObject();
		requestParams.put("username","test_test");
		requestParams.put("password","Testrest@123");
		request.body(requestParams.toString());
		Response response =request.put("/User");
		ResponseBody body=response.getBody();
		System.out.println(response.getStatusLine());
		System.out.println(body.asString());
		
	}
 
}